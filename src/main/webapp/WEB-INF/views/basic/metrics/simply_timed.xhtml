<ui:composition template="/WEB-INF/layout/layout.xhtml" xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:tag="http://tags.microprofile.training.gepardec.com">

    <ui:define name="headerText">
        Microprofile-Metrics Basics @SimplyTimed
    </ui:define>

    <ui:define name="additionalNavLink">
        <tag:navLink id="toBasicMetricsIndex" path="/basic/metrics/index" text="Back"><i class="fas fa-step-backward"/></tag:navLink>
    </ui:define>

    <ui:define name="body">

        <div class="container-lg">
            <div class="row m-2">
                <div class="col">
                    <section>
                        <p>
                            The specification for Microprofile
                            <a href="https://download.eclipse.org/microprofile/microprofile-metrics-3.0/microprofile-metrics-spec-3.0.html"
                               target="_blank">
                                Metrics.
                            </a>
                        </p>

                        <p>
                            <code>@SimplyTimed</code> is an annotation for marking a constructor or method of an annotated object as simply timed. The
                            metric of type SimpleTimer tracks the count of invocations of the annotated object and tracks how
                            long it took the invocations to complete
                        </p>

                        <hr class="mt-3 mb-3"/>

                        <div style="padding-bottom: 10pt">
                            <tag:button id="toMetricsExampleSimplyTimed" text="Call"
                                        path="/basic/metrics/simple-time"/>
                        </div>
                        <div class="row my-1">
                            <div class="col-sm text-lg-start text-sm-right mr-sm-1">
                                Count:
                            </div>
                            <div class="col-sm text-center text-sm-left ml-sm-1">
                                <h:outputText value="${count}"/>
                            </div>
                        </div>
                        <div class="row my-1">
                            <div class="col-sm text-lg-start text-sm-right mr-sm-1">
                                Elapsed time (in seconds):
                            </div>
                            <div class="col-sm text-center text-sm-left ml-sm-1">
                                <h:outputText value="${time}"/>
                            </div>
                        </div>
                        <hr class="mt-3 mb-3"/>
                    </section>
                </div>
            </div>

            <div class="row m-2">
                <div class="col">
                    <section>
                        <h5>
                            Your Task:
                        </h5>

                        <p>
                            Use <code>@SimplyTimed</code> to measure the duration and how often the method <code>simpleTime()</code>
                            in <code>com.gepardec.training.microprofile.basic.metrics.ExampleController</code> was called. The name fo the metric should be <code>"simply-timed-example"</code>.
                            Make sure that the metric is displayed at
                            <a href="http://localhost:9990/metrics"
                               target="_blank">
                                Wildfly
                            </a>
                            and
                            <a href="http://localhost:19090/"
                               target="_blank">
                                Prometheus.
                            </a>

                        </p>

                    </section>
                </div>
            </div>
        </div>
    </ui:define>
</ui:composition>



